# Cluster master URL
spark.master                             spark://spark-master:7077

# Event logging (required for Spark History Server)
spark.eventLog.enabled                   true
spark.eventLog.dir                       /opt/bitnami/spark/tmp/spark-events
spark.history.fs.logDirectory            /opt/bitnami/spark/tmp/spark-events

# Executor configuration
spark.executor.cores                     2
spark.executor.memory                    2g
spark.executor.memoryOverhead            512m
spark.executor.instances                 2
spark.cores.max                          4

# Driver configuration
spark.driver.memory                      1g
spark.driver.cores                       1
spark.driver.maxResultSize               1g

# Enable dynamic resource allocation
spark.dynamicAllocation.enabled          true
spark.dynamicAllocation.minExecutors     1
spark.dynamicAllocation.maxExecutors     4
spark.dynamicAllocation.initialExecutors 2
spark.shuffle.service.enabled            true

# Serialization
spark.serializer                         org.apache.spark.serializer.KryoSerializer

# Networking
spark.network.timeout                    300s
spark.executor.heartbeatInterval         30s

# Shuffle config
spark.sql.shuffle.partitions             200

# Adaptive query execution
spark.sql.adaptive.enabled               true
spark.sql.adaptive.coalescePartitions.enabled true
